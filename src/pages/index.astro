---
import BaseLayout from "../layouts/BaseLayout.astro";
import ContactSection from "../components/ContactSection.astro";
import Tiles from "../components/Tiles.astro";
import Banner from "../components/Banner.astro";
import { getCollection } from "astro:content";
import PageTileFromEntry from "../components/PageTile.astro";
import { site } from "../data/site";


const pages = await getCollection("pages");

const entry = pages.find((p) => p.slug === "landing");

if (!entry) {
  throw new Error("Nie znaleziono wpisu pages/landing");
}
---

<BaseLayout title="home">
  <Banner landingTitle="Hi, Iâ€™m Forty" />
  <Tiles source={site.tilesSource} count={site.tilesCount} />

  <PageTileFromEntry
    entry={entry}
    buttonHref={`/${entry.slug}`}
    buttonText="Get Started"
    id={entry.slug}
  />

  <ContactSection
    email={site.email}
    phone={site.phone}
    address={{
      street_address: site.street_address,
      city: site.city,
      state: site.state,
      zip_code: site.zip_code,
      country: site.country,
    }}
  />
</BaseLayout>
