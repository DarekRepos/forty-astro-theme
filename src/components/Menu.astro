---
import { navItems } from "../data/nav";

const base = import.meta.env.BASE_URL;
const withBase = (p: string) => {
  const cleanBase = base.endsWith('/') ? base : `${base}/`;
  const cleanPath = p.startsWith('/') ? p.substring(1) : p;
  return `${cleanBase}${cleanPath}`;
};

// Mimic the Jekyll logic:
// - include Home page link(s)
// - include other pages where nav-menu == true
const links = navItems
  .filter((i) => i.isHome || i.inMenu)
  .map((i) => ({ ...i, href: withBase(i.href) }));
---

<nav id="menu">
  <ul class="links">
    {links.map((item) => (
      <li><a href={item.href}>{item.title}</a></li>
    ))}
  </ul>

  <ul class="actions vertical">
    <li><a href="#" class="button special fit">Get Started</a></li>
    <li><a href="#" class="button fit">Log In</a></li>
  </ul>
</nav>
