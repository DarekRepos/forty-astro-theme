---
/**
 * entry: obiekt z getCollection()/getEntry()
 * buttonHref: gdzie ma prowadziÄ‡ przycisk (np. entry.slug)
 */
const { entry, buttonHref = "#", buttonText = "Get Started", id } = Astro.props;

// renderuje markdown body do komponentu Content
const { Content } = await entry.render();

const sectionId = id ?? entry.slug ?? "tile";

// Logic to fix the URL with the correct Base Path
const base = import.meta.env.BASE_URL;

const withBase = (p: string) => {
  // If it's already an absolute URL or just a hash, return as is
  if (p.startsWith('http') || p.startsWith('#')) return p;
  
  const cleanBase = base.endsWith('/') ? base : `${base}/`;
  const cleanPath = p.startsWith('/') ? p.substring(1) : p;
  
  // Important: Since this is likely a post or page entry, 
  // ensure the link includes the collection type if needed.
  return `${cleanBase}${cleanPath}`;
};

const finalHref = buttonHref !== "#" ? withBase(buttonHref) : "#";
---

<section id={sectionId}>
  <div class="inner">
    <header class="major">
      <h2>{entry.data.title}</h2>
    </header>

    <div class="content">
      <Content />
    </div>

    <ul class="actions">
      <li>
        <a href={finalHref} class="button next">
          {buttonText}
        </a>
      </li>
    </ul>
  </div>
</section>