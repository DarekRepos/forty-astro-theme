---
import { getEntry } from 'astro:content';
import { Image } from 'astro:assets'; // Import the optimizer

interface Props {
  slug: 'landing' | 'about';
}

const { slug } = Astro.props;
const entry = await getEntry('pages', slug);

if (!entry) {
  throw new Error(`Could not find content for slug: ${slug}`);
}

const { Content } = await entry.render();
---

<section id="content">
  <div class="inner">
    <header class="major">
      <h1>{entry.data.title}</h1>
    </header>

    {/* Only render the image if it exists in frontmatter */}
    {entry.data.image && (
      <span class="image main">
        <Image 
          src={entry.data.image} 
          alt={entry.data.title} 
          width={1200} 
          height={600}
          loading="eager" 
        />
      </span>
    )}
    
    <div class="content-body">
      <Content />
    </div>
  </div>
</section>